# Катиндирнет

## Требования
- PHP 8.x
- Расширение PDO с драйвером SQLite
- Права на запись для директорий `project/public/uploads`, `storage/cache`, `storage/backups`

## Развёртывание
1. Установите зависимости PHP и убедитесь, что расширение `pdo_sqlite` активно.
2. Запустите миграции и наполнение начальными данными:
   ```bash
   php scripts/cli.php migrate
   php scripts/cli.php seed
   ```
3. При необходимости очистите кеш: `php scripts/cli.php cache:clear`.

## Админка
- URL входа: `/admin/login.php`
- Дефолтный аккаунт: логин `tsoy`, пароль `0168`
- Сменить пароль можно в личном кабинете (`/id.php`) или через страницу пользователей (роль admin)

Роли:
- `admin` — полный доступ
- `editor` — управление контентом
- `reader` — просмотр

## Функциональные блоки
- Профили + CV — единая сущность, редактирование через модальные окна с AJAX
- Пользователи — управление ролями и паролями (только admin)
- Настройки — заголовок сайта, подзаголовок, тема, контакты (JSON), аналитика
- Редиректы — управление маршрутизацией (301/302)
- Инструменты — быстрые ссылки, включая [Shorty](https://l.tsoy.in)

## Аналитика
Плейсхолдер аналитики отображается в футере. Управление включением — в настройках админки.

## Резервное копирование
Команда `php scripts/cli.php backup` выводит путь к файлу базы данных. Скопируйте файл в безопасное место. Для восстановления замените файл и выполните `php scripts/cli.php migrate`.

## Структура
Основной код находится в каталоге `project/`, публичные ассеты — `project/public/assets`.
